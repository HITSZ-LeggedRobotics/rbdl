<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Rigid Body Dynamics Library: Constraints</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rigid Body Dynamics Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/d7d/group__constraints__group.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Constraints</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that contains both constraint information and workspace memory.  <a href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/db8/struct_rigid_body_dynamics_1_1_custom_constraint.html">CustomConstraint</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface to define general-purpose constraints.  <a href="../../de/db8/struct_rigid_body_dynamics_1_1_custom_constraint.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8aefdbdae188a9610c000aee5f64c8c8"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga8aefdbdae188a9610c000aee5f64c8c8">CalcConstraintsPositionError</a> (Model &amp;model, const Math::VectorNd &amp;Q, ConstraintSet &amp;CS, Math::VectorNd &amp;err, bool update_kinematics=true)</td></tr>
<tr class="memdesc:ga8aefdbdae188a9610c000aee5f64c8c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the position errors for the given <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>.  <a href="../../d3/d7d/group__constraints__group.html#ga8aefdbdae188a9610c000aee5f64c8c8">More...</a><br /></td></tr>
<tr class="separator:ga8aefdbdae188a9610c000aee5f64c8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a7991381e83c2b006d9dde1cc7fe4e6"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga5a7991381e83c2b006d9dde1cc7fe4e6">CalcConstraintsJacobian</a> (Model &amp;model, const Math::VectorNd &amp;Q, ConstraintSet &amp;CS, Math::MatrixNd &amp;G, bool update_kinematics=true)</td></tr>
<tr class="memdesc:ga5a7991381e83c2b006d9dde1cc7fe4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the Jacobian for the given <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>.  <a href="../../d3/d7d/group__constraints__group.html#ga5a7991381e83c2b006d9dde1cc7fe4e6">More...</a><br /></td></tr>
<tr class="separator:ga5a7991381e83c2b006d9dde1cc7fe4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb289316fd8278bbbbef8632860d158e"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gafb289316fd8278bbbbef8632860d158e">CalcConstraintsVelocityError</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDot, ConstraintSet &amp;CS, Math::VectorNd &amp;err, bool update_kinematics=true)</td></tr>
<tr class="memdesc:gafb289316fd8278bbbbef8632860d158e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the velocity errors for the given <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>.  <a href="../../d3/d7d/group__constraints__group.html#gafb289316fd8278bbbbef8632860d158e">More...</a><br /></td></tr>
<tr class="separator:gafb289316fd8278bbbbef8632860d158e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab319a7e855fe5711b1b72b80894a7226"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gab319a7e855fe5711b1b72b80894a7226">CalcConstrainedSystemVariables</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDot, const Math::VectorNd &amp;Tau, ConstraintSet &amp;CS, std::vector&lt; Math::SpatialVector &gt; *f_ext=NULL)</td></tr>
<tr class="memdesc:gab319a7e855fe5711b1b72b80894a7226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the terms <img class="formulaInl" alt="$H$" src="../../form_1.png"/>, <img class="formulaInl" alt="$G$" src="../../form_2.png"/>, and <img class="formulaInl" alt="$\gamma$" src="../../form_4.png"/> of the constrained dynamic problem and stores them in the <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>.  <a href="../../d3/d7d/group__constraints__group.html#gab319a7e855fe5711b1b72b80894a7226">More...</a><br /></td></tr>
<tr class="separator:gab319a7e855fe5711b1b72b80894a7226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9267022470b42f2c9e50600575654ee2"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga9267022470b42f2c9e50600575654ee2">CalcAssemblyQ</a> (Model &amp;model, Math::VectorNd QInit, ConstraintSet &amp;CS, Math::VectorNd &amp;Q, const Math::VectorNd &amp;weights, double tolerance=1e-12, unsigned int max_iter=100)</td></tr>
<tr class="memdesc:ga9267022470b42f2c9e50600575654ee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a feasible initial value of the generalized joint positions.  <a href="../../d3/d7d/group__constraints__group.html#ga9267022470b42f2c9e50600575654ee2">More...</a><br /></td></tr>
<tr class="separator:ga9267022470b42f2c9e50600575654ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccd1758f7c2affe3b46976da474a2756"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gaccd1758f7c2affe3b46976da474a2756">CalcAssemblyQDot</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDotInit, ConstraintSet &amp;CS, Math::VectorNd &amp;QDot, const Math::VectorNd &amp;weights)</td></tr>
<tr class="memdesc:gaccd1758f7c2affe3b46976da474a2756"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a feasible initial value of the generalized joint velocities.  <a href="../../d3/d7d/group__constraints__group.html#gaccd1758f7c2affe3b46976da474a2756">More...</a><br /></td></tr>
<tr class="separator:gaccd1758f7c2affe3b46976da474a2756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca303fd1b887ecbd26e4d02d9d8b8826"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gaca303fd1b887ecbd26e4d02d9d8b8826">ForwardDynamicsConstraintsDirect</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDot, const Math::VectorNd &amp;Tau, ConstraintSet &amp;CS, Math::VectorNd &amp;QDDot, std::vector&lt; Math::SpatialVector &gt; *f_ext=NULL)</td></tr>
<tr class="memdesc:gaca303fd1b887ecbd26e4d02d9d8b8826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes forward dynamics with contact by constructing and solving the full lagrangian equation.  <a href="../../d3/d7d/group__constraints__group.html#gaca303fd1b887ecbd26e4d02d9d8b8826">More...</a><br /></td></tr>
<tr class="separator:gaca303fd1b887ecbd26e4d02d9d8b8826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbdff81ed0bc8636ee03b15e0681574e"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gafbdff81ed0bc8636ee03b15e0681574e">ForwardDynamicsConstraintsRangeSpaceSparse</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDot, const Math::VectorNd &amp;Tau, ConstraintSet &amp;CS, Math::VectorNd &amp;QDDot, std::vector&lt; Math::SpatialVector &gt; *f_ext)</td></tr>
<tr class="separator:gafbdff81ed0bc8636ee03b15e0681574e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a4118c2e5389caa67b1f5404e10cef6"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga7a4118c2e5389caa67b1f5404e10cef6">ForwardDynamicsConstraintsNullSpace</a> (Model &amp;model, const VectorNd &amp;Q, const VectorNd &amp;QDot, const VectorNd &amp;Tau, ConstraintSet &amp;CS, VectorNd &amp;QDDot, std::vector&lt; Math::SpatialVector &gt; *f_ext)</td></tr>
<tr class="separator:ga7a4118c2e5389caa67b1f5404e10cef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9cff799e1e2fc962658fe378708b720"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gaa9cff799e1e2fc962658fe378708b720">ForwardDynamicsContactsKokkevis</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDot, const Math::VectorNd &amp;Tau, ConstraintSet &amp;CS, Math::VectorNd &amp;QDDot)</td></tr>
<tr class="memdesc:gaa9cff799e1e2fc962658fe378708b720"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes forward dynamics that accounts for active contacts in <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>.  <a href="../../d3/d7d/group__constraints__group.html#gaa9cff799e1e2fc962658fe378708b720">More...</a><br /></td></tr>
<tr class="separator:gaa9cff799e1e2fc962658fe378708b720"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga621092cead5443d18342e879a8b0e1ce"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga621092cead5443d18342e879a8b0e1ce">ComputeConstraintImpulsesDirect</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDotMinus, ConstraintSet &amp;CS, Math::VectorNd &amp;QDotPlus)</td></tr>
<tr class="memdesc:ga621092cead5443d18342e879a8b0e1ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes contact gain by constructing and solving the full lagrangian equation.  <a href="../../d3/d7d/group__constraints__group.html#ga621092cead5443d18342e879a8b0e1ce">More...</a><br /></td></tr>
<tr class="separator:ga621092cead5443d18342e879a8b0e1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00066f8de139813d1732aaa2ac581568"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga00066f8de139813d1732aaa2ac581568">ComputeConstraintImpulsesRangeSpaceSparse</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDotMinus, ConstraintSet &amp;CS, Math::VectorNd &amp;QDotPlus)</td></tr>
<tr class="memdesc:ga00066f8de139813d1732aaa2ac581568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves contact gain using SolveContactSystemRangeSpaceSparse()  <a href="../../d3/d7d/group__constraints__group.html#ga00066f8de139813d1732aaa2ac581568">More...</a><br /></td></tr>
<tr class="separator:ga00066f8de139813d1732aaa2ac581568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bd4d6835f28d732505f12141d758731"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga6bd4d6835f28d732505f12141d758731">ComputeConstraintImpulsesNullSpace</a> (Model &amp;model, const Math::VectorNd &amp;Q, const Math::VectorNd &amp;QDotMinus, ConstraintSet &amp;CS, Math::VectorNd &amp;QDotPlus)</td></tr>
<tr class="memdesc:ga6bd4d6835f28d732505f12141d758731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves contact gain using SolveContactSystemNullSpace()  <a href="../../d3/d7d/group__constraints__group.html#ga6bd4d6835f28d732505f12141d758731">More...</a><br /></td></tr>
<tr class="separator:ga6bd4d6835f28d732505f12141d758731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6d7f6b8059cd0b83414837635ba96b6"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gad6d7f6b8059cd0b83414837635ba96b6">SolveConstrainedSystemDirect</a> (Math::MatrixNd &amp;H, const Math::MatrixNd &amp;G, const Math::VectorNd &amp;c, const Math::VectorNd &amp;gamma, Math::VectorNd &amp;qddot, Math::VectorNd &amp;lambda, Math::MatrixNd &amp;A, Math::VectorNd &amp;b, Math::VectorNd &amp;x, Math::LinearSolver &amp;linear_solver)</td></tr>
<tr class="memdesc:gad6d7f6b8059cd0b83414837635ba96b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solves the full contact system directly, i.e. simultaneously for contact forces and joint accelerations.  <a href="../../d3/d7d/group__constraints__group.html#gad6d7f6b8059cd0b83414837635ba96b6">More...</a><br /></td></tr>
<tr class="separator:gad6d7f6b8059cd0b83414837635ba96b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac634d60a1857213ec7289a76f8bd280a"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gac634d60a1857213ec7289a76f8bd280a">SolveConstrainedSystemRangeSpaceSparse</a> (Model &amp;model, Math::MatrixNd &amp;H, const Math::MatrixNd &amp;G, const Math::VectorNd &amp;c, const Math::VectorNd &amp;gamma, Math::VectorNd &amp;qddot, Math::VectorNd &amp;lambda, Math::MatrixNd &amp;K, Math::VectorNd &amp;a, Math::LinearSolver linear_solver)</td></tr>
<tr class="memdesc:gac634d60a1857213ec7289a76f8bd280a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solves the contact system by first solving for the the joint accelerations and then the contact forces using a sparse matrix decomposition of the joint space inertia matrix.  <a href="../../d3/d7d/group__constraints__group.html#gac634d60a1857213ec7289a76f8bd280a">More...</a><br /></td></tr>
<tr class="separator:gac634d60a1857213ec7289a76f8bd280a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga291125f9f37ab712f624974378ca8384"><td class="memItemLeft" align="right" valign="top">RBDL_DLLAPI void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#ga291125f9f37ab712f624974378ca8384">SolveConstrainedSystemNullSpace</a> (Math::MatrixNd &amp;H, const Math::MatrixNd &amp;G, const Math::VectorNd &amp;c, const Math::VectorNd &amp;gamma, Math::VectorNd &amp;qddot, Math::VectorNd &amp;lambda, Math::MatrixNd &amp;Y, Math::MatrixNd &amp;Z, Math::VectorNd &amp;qddot_y, Math::VectorNd &amp;qddot_z, Math::LinearSolver &amp;linear_solver)</td></tr>
<tr class="memdesc:ga291125f9f37ab712f624974378ca8384"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solves the contact system by first solving for the joint accelerations and then for the constraint forces.  <a href="../../d3/d7d/group__constraints__group.html#ga291125f9f37ab712f624974378ca8384">More...</a><br /></td></tr>
<tr class="separator:ga291125f9f37ab712f624974378ca8384"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae2e0e1609dd6e5ed9628a7097b32665e"><td class="memItemLeft" align="right" valign="top">struct RBDL_DLLAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7d/group__constraints__group.html#gae2e0e1609dd6e5ed9628a7097b32665e">CustomConstraint</a></td></tr>
<tr class="separator:gae2e0e1609dd6e5ed9628a7097b32665e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Constraints are handled by specification of a <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet </a> which contains all informations about the current constraints and workspace memory.</p>
<p>Separate constraints can be specified by calling <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#ac4525e239656122768bd3b39d7430879" title="Adds a contact constraint to the constraint set. ">ConstraintSet::AddContactConstraint()</a>, <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#a68cf418a61f5922912a54723d17b22b6" title="Adds a loop constraint to the constraint set. ">ConstraintSet::AddLoopConstraint()</a>, and <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#ab94618ccc2d5539abb433c1c799ed4e0" title="Adds a custom constraint to the constraint set. ">ConstraintSet::AddCustomConstraint()</a>. After all constraints have been specified, this <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet </a> has to be bound to the model via <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#ae4488dbfec02efc4c619ead2fcaaa7d9" title="Initializes and allocates memory for the constraint set. ">ConstraintSet::Bind()</a>. This initializes workspace memory that is later used when calling one of the contact functions, such as ForwardDynamicsContactsDirects().</p>
<p>The values in the vectors <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#a9b96834a8bbeb859d4c5bb2889b14cde">ConstraintSet::force</a> and <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#a24ccb84dfb5b40b9e4539a1dcbdb1916">ConstraintSet::impulse</a> contain the computed force or impulse values for each constraint when returning from one of the contact functions.</p>
<h1><a class="anchor" id="solution_constraint_system"></a>
Solution of the Constraint System</h1>
<h2><a class="anchor" id="constraint_system"></a>
Linear System of the Constrained Dynamics</h2>
<p>In the presence of constraints, to compute the acceleration one has to solve a linear system of the form: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{cc} H &amp; G^T \\ G &amp; 0 \end{array} \right) \left( \begin{array}{c} \ddot{q} \\ - \lambda \end{array} \right) = \left( \begin{array}{c} -C + \tau \\ \gamma \end{array} \right) \]" src="../../form_0.png"/>
</p>
<p> where <img class="formulaInl" alt="$H$" src="../../form_1.png"/> is the joint space inertia matrix computed with the <a class="el" href="../../d6/d63/group__dynamics__group.html#ga16a9d225d96d260af451f69e258d0875" title="Computes the joint space inertia matrix by using the Composite Rigid Body Algorithm. ">CompositeRigidBodyAlgorithm()</a>, <img class="formulaInl" alt="$G$" src="../../form_2.png"/> is the constraint jacobian, <img class="formulaInl" alt="$C$" src="../../form_3.png"/> the bias force (sometimes called "non-linear
  effects"), and <img class="formulaInl" alt="$\gamma$" src="../../form_4.png"/> the generalized acceleration independent part of the constraints.</p>
<h2><a class="anchor" id="collision_system"></a>
Linear System of the Contact Collision</h2>
<p>Similarly to compute the response of the model to a contact gain one has to solve a system of the following form: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{cc} H &amp; G^T \\ G &amp; 0 \end{array} \right) \left( \begin{array}{c} \dot{q}^{+} \\ \Lambda \end{array} \right) = \left( \begin{array}{c} H \dot{q}^{-} \\ v^{+} \end{array} \right) \]" src="../../form_5.png"/>
</p>
<p> where <img class="formulaInl" alt="$H$" src="../../form_1.png"/> is the joint space inertia matrix computed with the <a class="el" href="../../d6/d63/group__dynamics__group.html#ga16a9d225d96d260af451f69e258d0875" title="Computes the joint space inertia matrix by using the Composite Rigid Body Algorithm. ">CompositeRigidBodyAlgorithm()</a>, <img class="formulaInl" alt="$G$" src="../../form_2.png"/> are the point jacobians of the contact points, <img class="formulaInl" alt="$\dot{q}^{+}$" src="../../form_6.png"/> the generalized velocity after the impact, <img class="formulaInl" alt="$\Lambda$" src="../../form_7.png"/> the impulses at each constraint, <img class="formulaInl" alt="$\dot{q}^{-}$" src="../../form_8.png"/> the generalized velocity before the impact, and <img class="formulaInl" alt="$v^{+}$" src="../../form_9.png"/> the desired velocity of each constraint after the impact (known beforehand, usually 0). The value of <img class="formulaInl" alt="$v^{+}$" src="../../form_9.png"/> can is specified via the variable <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#aa85422fa19c98f69d05e2df5aa08032e">ConstraintSet::v_plus</a> and defaults to 0.</p>
<h2><a class="anchor" id="solution_methods"></a>
Solution Methods</h2>
<p>There are essentially three different approaches to solve these systems:</p><ol type="1">
<li><b>Direct:</b> solve the full system to simultaneously compute <img class="formulaInl" alt="$\ddot{q}$" src="../../form_10.png"/> and <img class="formulaInl" alt="$\lambda$" src="../../form_11.png"/>. This may be slow for large systems and many constraints.</li>
<li><b>Range-Space</b>: solve first for <img class="formulaInl" alt="$\lambda$" src="../../form_11.png"/> and then for <img class="formulaInl" alt="$\ddot{q}$" src="../../form_10.png"/>.</li>
<li><b>Null-Space</b>: solve furst for <img class="formulaInl" alt="$\ddot{q}$" src="../../form_10.png"/> and then for <img class="formulaInl" alt="$\lambda$" src="../../form_11.png"/> The methods are the same for the contact gains just with different variables on the right-hand-side.</li>
</ol>
<p>RBDL provides methods for all approaches. The implementation for the range-space method also exploits sparsities in the joint space inertia matrix using a sparse structure preserving <img class="formulaInl" alt="$L^TL$" src="../../form_12.png"/> decomposition as described in Chapter 8.5 of "Rigid Body Dynamics Algorithms".</p>
<p>None of the methods is generally superior to the others and each has different trade-offs as factors such as model topology, number of constraints, constrained bodies, numerical stability, and performance vary and evaluation has to be made on a case-by-case basis.</p>
<h2><a class="anchor" id="solving_constraints_dynamics"></a>
Methods for Solving Constrained</h2>
<p>Dynamics</p>
<p>RBDL provides the following methods to compute the acceleration of a constrained system:</p>
<ul>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#gaca303fd1b887ecbd26e4d02d9d8b8826" title="Computes forward dynamics with contact by constructing and solving the full lagrangian equation...">ForwardDynamicsConstraintsDirect()</a></li>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#gafbdff81ed0bc8636ee03b15e0681574e">ForwardDynamicsConstraintsRangeSpaceSparse()</a></li>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#ga7a4118c2e5389caa67b1f5404e10cef6">ForwardDynamicsConstraintsNullSpace()</a></li>
</ul>
<h2><a class="anchor" id="solving_constraints_collisions"></a>
Methods for Computing Collisions</h2>
<p>RBDL provides the following methods to compute the collision response on new contact gains:</p>
<ul>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#ga621092cead5443d18342e879a8b0e1ce" title="Computes contact gain by constructing and solving the full lagrangian equation. ">ComputeConstraintImpulsesDirect()</a></li>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#ga00066f8de139813d1732aaa2ac581568" title="Resolves contact gain using SolveContactSystemRangeSpaceSparse() ">ComputeConstraintImpulsesRangeSpaceSparse()</a></li>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#ga6bd4d6835f28d732505f12141d758731" title="Resolves contact gain using SolveContactSystemNullSpace() ">ComputeConstraintImpulsesNullSpace()</a></li>
</ul>
<h2><a class="anchor" id="assembly_q_qdot"></a>
Computing generalized joint positions and velocities</h2>
<p>satisfying the constraint equations.</p>
<p>When considering a model subject position level constraints expressed by the equation <img class="formulaInl" alt="$\phi (q) = 0$" src="../../form_13.png"/>, it is often necessary to compute generalized joint position and velocities which satisfy the constraints. Even velocity-level constraints may have position-level assembly constraints: a rolling-without-slipping constraint is a velocity-level constraint, but during assembly it might be desireable to put the rolling surfaces in contact with eachother.</p>
<p>In order to compute a vector of generalized joint positions that satisfy the constraints it is necessary to solve the following optimization problem: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} \text{minimize} &amp;&amp; \sum_{i = 0}^{n} (q - q_{0})^T W (q - q_{0}) \\ \text{over} &amp;&amp; q \\ \text{subject to} &amp;&amp; \phi (q) = 0 \end{eqnarray*}" src="../../form_14.png"/>
</p>
<p>In order to compute a vector of generalized joint velocities that satisfy the constraints it is necessary to solve the following optimization problem: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\begin{eqnarray*} \text{minimize} &amp;&amp; \sum_{i = 0}^{n} (\dot{q} - \dot{q}_{0})^T W (\dot{q} - \dot{q}_{0}) \\ \text{over} &amp;&amp; \dot{q} \\ \text{subject to} &amp;&amp; \dot{\phi} (q) = \phi _{q}(q) \dot{q} + \phi _{t}(q) = 0 \end{eqnarray*}" src="../../form_15.png"/>
</p>
<p><img class="formulaInl" alt="$q_{0}$" src="../../form_16.png"/> and <img class="formulaInl" alt="$\dot{q}_{0}$" src="../../form_17.png"/> are initial guesses, <img class="formulaInl" alt="$\phi _{q}$" src="../../form_18.png"/> is the constraints jacobian (partial derivative of <img class="formulaInl" alt="$\phi$" src="../../form_19.png"/> with respect to <img class="formulaInl" alt="$q$" src="../../form_20.png"/>), and <img class="formulaInl" alt="$\phi _{t}(q)$" src="../../form_21.png"/> is the partial derivative of <img class="formulaInl" alt="$\phi$" src="../../form_19.png"/> with respect to time. <img class="formulaInl" alt="$W$" src="../../form_22.png"/> is a diagonal weighting matrix, which can be exploited to prioritize changes in the position/ velocity of specific joints. With a solver capable of handling singular matrices, it is possible to set to 1 the weight of the joint positions/ velocities that should not be changed from the initial guesses, and to 0 those corresponding to the values that can be changed.</p>
<p>These problems are solved using the Lagrange multipliers method. For the velocity problem the solution is exact. For the position problem the constraints are linearized in the form <img class="formulaInl" alt="$ \phi (q_{0}) + \phi _{t}(q0) + \phi _{q_0}(q) (q - q_{0}) $" src="../../form_23.png"/> and the linearized problem is solved iteratively until the constraint position errors are smaller than a given threshold.</p>
<p>RBDL provides two functions to compute feasible joint position and velocities:</p><ul>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#ga9267022470b42f2c9e50600575654ee2" title="Computes a feasible initial value of the generalized joint positions. ">CalcAssemblyQ()</a></li>
<li><a class="el" href="../../d3/d7d/group__constraints__group.html#gaccd1758f7c2affe3b46976da474a2756" title="Computes a feasible initial value of the generalized joint velocities. ">CalcAssemblyQDot()</a></li>
</ul>
<h2><a class="anchor" id="baumgarte_stabilization"></a>
Baumgarte Stabilization</h2>
<p>The constrained dynamic equations are correct at the acceleration level but will drift at the velocity and position level during numerical integration. RBDL implements Baumgarte stabilization to avoid the accumulation of position and velocity errors for loop constraints and custom constraints. Contact constraints do not have Baumgarte stabilization because they are a special case which does not typically suffer from drift. The stabilization term can be enabled/disabled using the appropriate <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#a68cf418a61f5922912a54723d17b22b6" title="Adds a loop constraint to the constraint set. ">ConstraintSet::AddLoopConstraint</a> and <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#ab94618ccc2d5539abb433c1c799ed4e0" title="Adds a custom constraint to the constraint set. ">ConstraintSet::AddCustomConstraint</a> functions.</p>
<p>The dynamic equations are changed to the following form: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{cc} H &amp; G^T \\ G &amp; 0 \end{array} \right) \left( \begin{array}{c} \ddot{q} \\ - \lambda \end{array} \right) = \left( \begin{array}{c} -C + \tau \\ \gamma + \gamma _{stab} \end{array} \right) \]" src="../../form_24.png"/>
</p>
<p> A term <img class="formulaInl" alt="$\gamma _{stab}$" src="../../form_25.png"/> is added to the right hand side of the equation, defined in the following way: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \gamma _{stab} = - 2 \alpha \dot{\phi} (q) - \beta^2 \phi (q) \]" src="../../form_26.png"/>
</p>
<p> where <img class="formulaInl" alt="$\phi (q)$" src="../../form_27.png"/> are the position level constraint errors and <img class="formulaInl" alt="$\alpha$" src="../../form_28.png"/> and <img class="formulaInl" alt="$\beta$" src="../../form_29.png"/> are tuning coefficients. There is no clear and simple rule on how to choose them as good values also depend on the used integration method and time step. If the values are too small the constrained dynamics equation becomes stiff, too big values result in errors not being reduced.</p>
<p>A good starting point is to parameterize the coefficients as: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \alpha = \beta = 1 / T_\textit{stab} \]" src="../../form_30.png"/>
</p>
<p> with <img class="formulaInl" alt="$T_\textit{stab}$" src="../../form_31.png"/> specifies a time constant for errors in position and velocity errors to reduce. Featherstone suggests in his book "Rigid
  Body Dynamics Algorithms" that for a big industrial robot a value of 0.1 is reasonable. When testing different values best is to try different orders of magnitude as e.g. doubling a value only has little effect.</p>
<p>For Loop- and CustomConstraints Baumgarte stabilization is enabled by default and uses the stabilization parameter <img class="formulaInl" alt="$T_\textit{stab} = 0.1$" src="../../form_32.png"/>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9267022470b42f2c9e50600575654ee2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI bool CalcAssemblyQ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a>&#160;</td>
          <td class="paramname"><em>QInit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>tolerance</em> = <code>1e-12</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_iter</em> = <code>100</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a feasible initial value of the generalized joint positions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>the model </td></tr>
    <tr><td class="paramname">QInit</td><td>initial guess for the generalized positions of the joints </td></tr>
    <tr><td class="paramname">CS</td><td>the constraint set for which the error should be computed </td></tr>
    <tr><td class="paramname">Q</td><td>(output) vector of the generalized joint positions. </td></tr>
    <tr><td class="paramname">weights</td><td>weighting coefficients for the different joint positions. </td></tr>
    <tr><td class="paramname">tolerance</td><td>the function will return successfully if the constraint position error norm is lower than this value. </td></tr>
    <tr><td class="paramname">max_iter</td><td>the funciton will return unsuccessfully after performing this number of iterations.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the generalized joint positions were computed successfully, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00819">819</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00498">RigidBodyDynamics::CalcConstraintsPositionError()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00461">Model::GetQuaternion()</a>, <a class="el" href="../../d7/d31/_joint_8h_source.html#l00186">RigidBodyDynamics::JointTypeSpherical</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00175">Model::mJoints</a>, <a class="el" href="../../df/d7d/_quaternion_8h_source.html#l00196">Quaternion::omegaToQDot()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00148">Model::q_size</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00476">Model::SetQuaternion()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00399">ConstraintSet::size()</a>, and <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01638">RigidBodyDynamics::SolveLinearSystem()</a>.</p>

</div>
</div>
<a class="anchor" id="gaccd1758f7c2affe3b46976da474a2756"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void CalcAssemblyQDot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotInit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>weights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a feasible initial value of the generalized joint velocities. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>the model </td></tr>
    <tr><td class="paramname">Q</td><td>the generalized joint position of the joints. It is assumed that this vector satisfies the position level assemblt constraints. </td></tr>
    <tr><td class="paramname">QDotInit</td><td>initial guess for the generalized velocities of the joints </td></tr>
    <tr><td class="paramname">CS</td><td>the constraint set for which the error should be computed </td></tr>
    <tr><td class="paramname">QDot</td><td>(output) vector of the generalized joint velocities. </td></tr>
    <tr><td class="paramname">weights</td><td>weighting coefficients for the different joint positions. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00926">926</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00148">Model::q_size</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00399">ConstraintSet::size()</a>, and <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01638">RigidBodyDynamics::SolveLinearSystem()</a>.</p>

</div>
</div>
<a class="anchor" id="gab319a7e855fe5711b1b72b80894a7226"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void CalcConstrainedSystemVariables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a3e84ee221851d9f8b98a4f729f0f0ca2">Math::SpatialVector</a> &gt; *&#160;</td>
          <td class="paramname"><em>f_ext</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the terms <img class="formulaInl" alt="$H$" src="../../form_1.png"/>, <img class="formulaInl" alt="$G$" src="../../form_2.png"/>, and <img class="formulaInl" alt="$\gamma$" src="../../form_4.png"/> of the constrained dynamic problem and stores them in the <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>the model </td></tr>
    <tr><td class="paramname">Q</td><td>the generalized positions of the joints </td></tr>
    <tr><td class="paramname">QDot</td><td>the generalized velocities of the joints </td></tr>
    <tr><td class="paramname">Tau</td><td>the generalized forces of the joints </td></tr>
    <tr><td class="paramname">CS</td><td>the constraint set for which the error should be computed </td></tr>
    <tr><td class="paramname">f_ext</td><td>External forces acting on the body in base coordinates (optional, defaults to NULL)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is normally called automatically in the various constrained dynamics functions, the user normally does not have to call it. </dd></dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00696">696</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00439">ConstraintSet::acceleration</a>, <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00159">SpatialTransform::apply()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00431">ConstraintSet::baumgarteParameters</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00420">ConstraintSet::body</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00425">ConstraintSet::body_p</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00426">ConstraintSet::body_s</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00452">ConstraintSet::C</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00159">RigidBodyDynamics::CalcBodyToBaseCoordinates()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00224">RigidBodyDynamics::CalcBodyWorldOrientation()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00498">RigidBodyDynamics::CalcConstraintsPositionError()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00666">RigidBodyDynamics::CalcConstraintsVelocityError()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00517">RigidBodyDynamics::CalcPointAcceleration()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00564">RigidBodyDynamics::CalcPointAcceleration6D()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00480">RigidBodyDynamics::CalcPointVelocity6D()</a>, <a class="el" href="../../de/d3c/_dynamics_8cc_source.html#l00167">RigidBodyDynamics::CompositeRigidBodyAlgorithm()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00429">ConstraintSet::constraintAxis</a>, <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00403">RigidBodyDynamics::Math::crossm()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00433">ConstraintSet::err</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00435">ConstraintSet::errd</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00454">ConstraintSet::gamma</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00127">Model::lambda</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00263">Model::mBodies</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00414">ConstraintSet::mContactConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00416">ConstraintSet::mCustomConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00417">ConstraintSet::mCustomConstraints</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00415">ConstraintSet::mLoopConstraintIndices</a>, <a class="el" href="../../de/d3c/_dynamics_8cc_source.html#l00107">RigidBodyDynamics::NonlinearEffects()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00422">ConstraintSet::normal</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00421">ConstraintSet::point</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00494">ConstraintSet::QDDot_0</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00238">Model::X_base</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00236">Model::X_lambda</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00427">ConstraintSet::X_p</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00428">ConstraintSet::X_s</a>.</p>

</div>
</div>
<a class="anchor" id="ga5a7991381e83c2b006d9dde1cc7fe4e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void CalcConstraintsJacobian </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>update_kinematics</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the Jacobian for the given <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>the model </td></tr>
    <tr><td class="paramname">Q</td><td>the generalized positions of the joints </td></tr>
    <tr><td class="paramname">CS</td><td>the constraint set for which the Jacobian should be computed </td></tr>
    <tr><td class="paramname">G</td><td>(output) matrix where the output will be stored in </td></tr>
    <tr><td class="paramname">update_kinematics</td><td>whether the kinematics of the model should be updated from Q </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">570</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00159">SpatialTransform::apply()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00420">ConstraintSet::body</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00425">ConstraintSet::body_p</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00426">ConstraintSet::body_s</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00159">RigidBodyDynamics::CalcBodyToBaseCoordinates()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00224">RigidBodyDynamics::CalcBodyWorldOrientation()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00246">RigidBodyDynamics::CalcPointJacobian()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00310">RigidBodyDynamics::CalcPointJacobian6D()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00429">ConstraintSet::constraintAxis</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00311">SpatialTransform::E</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00464">ConstraintSet::Gi</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00470">ConstraintSet::GSJ</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00466">ConstraintSet::GSpi</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00468">ConstraintSet::GSsi</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00414">ConstraintSet::mContactConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00416">ConstraintSet::mCustomConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00417">ConstraintSet::mCustomConstraints</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00415">ConstraintSet::mLoopConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00422">ConstraintSet::normal</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00421">ConstraintSet::point</a>, <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00312">SpatialTransform::r</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00427">ConstraintSet::X_p</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00428">ConstraintSet::X_s</a>, and <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00396">RigidBodyDynamics::Math::Xtrans()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8aefdbdae188a9610c000aee5f64c8c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void CalcConstraintsPositionError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>update_kinematics</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the position errors for the given <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>the model </td></tr>
    <tr><td class="paramname">Q</td><td>the generalized positions of the joints </td></tr>
    <tr><td class="paramname">CS</td><td>the constraint set for which the error should be computed </td></tr>
    <tr><td class="paramname">err</td><td>(output) vector where the error will be stored in (should have the size of CS). </td></tr>
    <tr><td class="paramname">update_kinematics</td><td>whether the kinematics of the model should be updated from Q.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>the position error is always 0 for contact constraints. </dd></dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00498">498</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00425">ConstraintSet::body_p</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00426">ConstraintSet::body_s</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00159">RigidBodyDynamics::CalcBodyToBaseCoordinates()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00224">RigidBodyDynamics::CalcBodyWorldOrientation()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00429">ConstraintSet::constraintAxis</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00414">ConstraintSet::mContactConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00416">ConstraintSet::mCustomConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00417">ConstraintSet::mCustomConstraints</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00415">ConstraintSet::mLoopConstraintIndices</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00399">ConstraintSet::size()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00427">ConstraintSet::X_p</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00428">ConstraintSet::X_s</a>.</p>

</div>
</div>
<a class="anchor" id="gafb289316fd8278bbbbef8632860d158e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void CalcConstraintsVelocityError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>update_kinematics</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the velocity errors for the given <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>the model </td></tr>
    <tr><td class="paramname">Q</td><td>the generalized positions of the joints </td></tr>
    <tr><td class="paramname">QDot</td><td>the generalized velocities of the joints </td></tr>
    <tr><td class="paramname">CS</td><td>the constraint set for which the error should be computed </td></tr>
    <tr><td class="paramname">err</td><td>(output) vector where the error will be stored in (should have the size of CS). </td></tr>
    <tr><td class="paramname">update_kinematics</td><td>whether the kinematics of the model should be updated from Q.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>this is equivalent to multiplying the constraint jacobian by the generalized velocities of the joints. </dd></dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00666">666</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00416">ConstraintSet::mCustomConstraintIndices</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00417">ConstraintSet::mCustomConstraints</a>.</p>

</div>
</div>
<a class="anchor" id="ga621092cead5443d18342e879a8b0e1ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ComputeConstraintImpulsesDirect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotMinus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotPlus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes contact gain by constructing and solving the full lagrangian equation. </p>
<p>This method builds and solves the linear system </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{cc} H &amp; G^T \\ G &amp; 0 \end{array} \right) \left( \begin{array}{c} \dot{q}^{+} \\ \Lambda \end{array} \right) = \left( \begin{array}{c} H \dot{q}^{-} \\ v^{+} \end{array} \right) \]" src="../../form_5.png"/>
</p>
<p> where <img class="formulaInl" alt="$H$" src="../../form_1.png"/> is the joint space inertia matrix computed with the <a class="el" href="../../d6/d63/group__dynamics__group.html#ga16a9d225d96d260af451f69e258d0875" title="Computes the joint space inertia matrix by using the Composite Rigid Body Algorithm. ">CompositeRigidBodyAlgorithm()</a>, <img class="formulaInl" alt="$G$" src="../../form_2.png"/> are the point jacobians of the contact points, <img class="formulaInl" alt="$\dot{q}^{+}$" src="../../form_6.png"/> the generalized velocity after the impact, <img class="formulaInl" alt="$\Lambda$" src="../../form_7.png"/> the impulses at each constraint, <img class="formulaInl" alt="$\dot{q}^{-}$" src="../../form_8.png"/> the generalized velocity before the impact, and <img class="formulaInl" alt="$v^{+}$" src="../../form_9.png"/> the desired velocity of each constraint after the impact (known beforehand, usually 0). The value of <img class="formulaInl" alt="$v^{+}$" src="../../form_9.png"/> can is specified via the variable <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#aa85422fa19c98f69d05e2df5aa08032e">ConstraintSet::v_plus</a> and defaults to 0.</p>
<dl class="section note"><dt>Note</dt><dd>So far, only constraints acting along cartesian coordinate axes are allowed (i.e. (1, 0, 0), (0, 1, 0), and (0, 0, 1)). Also, one must not specify redundant constraints!</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>To increase performance group constraints body and pointwise such that constraints acting on the same body point are sequentially in <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. This can save computation of point Jacobians <img class="formulaInl" alt="$G$" src="../../form_2.png"/>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>rigid body model </td></tr>
    <tr><td class="paramname">Q</td><td>state vector of the internal joints </td></tr>
    <tr><td class="paramname">QDotMinus</td><td>velocity vector of the internal joints before the impact </td></tr>
    <tr><td class="paramname">CS</td><td>the set of active constraints </td></tr>
    <tr><td class="paramname">QDotPlus</td><td>velocities of the internals joints after the impact (output) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01053">1053</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00457">ConstraintSet::A</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00459">ConstraintSet::b</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../de/d3c/_dynamics_8cc_source.html#l00167">RigidBodyDynamics::CompositeRigidBodyAlgorithm()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00443">ConstraintSet::impulse</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00399">ConstraintSet::size()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00349">RigidBodyDynamics::SolveConstrainedSystemDirect()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00445">ConstraintSet::v_plus</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00461">ConstraintSet::x</a>.</p>

</div>
</div>
<a class="anchor" id="ga6bd4d6835f28d732505f12141d758731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ComputeConstraintImpulsesNullSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotMinus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotPlus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves contact gain using SolveContactSystemNullSpace() </p>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01104">1104</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../de/d3c/_dynamics_8cc_source.html#l00167">RigidBodyDynamics::CompositeRigidBodyAlgorithm()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00476">ConstraintSet::GT_qr</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00479">ConstraintSet::GT_qr_Q</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00443">ConstraintSet::impulse</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00482">ConstraintSet::qddot_y</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00483">ConstraintSet::qddot_z</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00437">RigidBodyDynamics::SolveConstrainedSystemNullSpace()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00445">ConstraintSet::v_plus</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00480">ConstraintSet::Y</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00481">ConstraintSet::Z</a>.</p>

</div>
</div>
<a class="anchor" id="ga00066f8de139813d1732aaa2ac581568"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ComputeConstraintImpulsesRangeSpaceSparse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotMinus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDotPlus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves contact gain using SolveContactSystemRangeSpaceSparse() </p>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01083">1083</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00490">ConstraintSet::a</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00570">RigidBodyDynamics::CalcConstraintsJacobian()</a>, <a class="el" href="../../de/d3c/_dynamics_8cc_source.html#l00167">RigidBodyDynamics::CompositeRigidBodyAlgorithm()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00443">ConstraintSet::impulse</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00488">ConstraintSet::K</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00400">RigidBodyDynamics::SolveConstrainedSystemRangeSpaceSparse()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00445">ConstraintSet::v_plus</a>.</p>

</div>
</div>
<a class="anchor" id="gaca303fd1b887ecbd26e4d02d9d8b8826"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ForwardDynamicsConstraintsDirect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a3e84ee221851d9f8b98a4f729f0f0ca2">Math::SpatialVector</a> &gt; *&#160;</td>
          <td class="paramname"><em>f_ext</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes forward dynamics with contact by constructing and solving the full lagrangian equation. </p>
<p>This method builds and solves the linear system </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{cc} H &amp; G^T \\ G &amp; 0 \end{array} \right) \left( \begin{array}{c} \ddot{q} \\ -\lambda \end{array} \right) = \left( \begin{array}{c} -C + \tau \\ \gamma \end{array} \right) \]" src="../../form_33.png"/>
</p>
<p> where <img class="formulaInl" alt="$H$" src="../../form_1.png"/> is the joint space inertia matrix computed with the <a class="el" href="../../d6/d63/group__dynamics__group.html#ga16a9d225d96d260af451f69e258d0875" title="Computes the joint space inertia matrix by using the Composite Rigid Body Algorithm. ">CompositeRigidBodyAlgorithm()</a>, <img class="formulaInl" alt="$G$" src="../../form_2.png"/> are the point jacobians of the contact points, <img class="formulaInl" alt="$C$" src="../../form_3.png"/> the bias force (sometimes called "non-linear
  effects"), and <img class="formulaInl" alt="$\gamma$" src="../../form_4.png"/> the generalized acceleration independent part of the contact point accelerations.</p>
<dl class="section note"><dt>Note</dt><dd>This function works with ContactConstraints, LoopConstraints and Custom Constraints. Nonetheless, this method will not tolerate redundant constraints.</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>To increase performance group constraints body and pointwise such that constraints acting on the same body point are sequentially in <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. This can save computation of point jacobians <img class="formulaInl" alt="$G$" src="../../form_2.png"/>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>rigid body model </td></tr>
    <tr><td class="paramname">Q</td><td>state vector of the internal joints </td></tr>
    <tr><td class="paramname">QDot</td><td>velocity vector of the internal joints </td></tr>
    <tr><td class="paramname">Tau</td><td>actuations of the internal joints </td></tr>
    <tr><td class="paramname">CS</td><td>the description of all acting constraints </td></tr>
    <tr><td class="paramname">QDDot</td><td>accelerations of the internals joints (output) </td></tr>
    <tr><td class="paramname">f_ext</td><td>External forces acting on the body in base coordinates (optional, defaults to NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>During execution of this function values such as <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#a9b96834a8bbeb859d4c5bb2889b14cde">ConstraintSet::force</a> get modified and will contain the value of the force acting along the normal. </dd></dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00980">980</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00457">ConstraintSet::A</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00459">ConstraintSet::b</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00452">ConstraintSet::C</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00696">RigidBodyDynamics::CalcConstrainedSystemVariables()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00441">ConstraintSet::force</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00454">ConstraintSet::gamma</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/def/_logging_8h_source.html#l00023">LOG</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00399">ConstraintSet::size()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00349">RigidBodyDynamics::SolveConstrainedSystemDirect()</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00461">ConstraintSet::x</a>.</p>

</div>
</div>
<a class="anchor" id="ga7a4118c2e5389caa67b1f5404e10cef6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ForwardDynamicsConstraintsNullSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a3e84ee221851d9f8b98a4f729f0f0ca2">Math::SpatialVector</a> &gt; *&#160;</td>
          <td class="paramname"><em>f_ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01023">1023</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00452">ConstraintSet::C</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00696">RigidBodyDynamics::CalcConstrainedSystemVariables()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00441">ConstraintSet::force</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00454">ConstraintSet::gamma</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00476">ConstraintSet::GT_qr</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00479">ConstraintSet::GT_qr_Q</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../da/def/_logging_8h_source.html#l00023">LOG</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00482">ConstraintSet::qddot_y</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00483">ConstraintSet::qddot_z</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00437">RigidBodyDynamics::SolveConstrainedSystemNullSpace()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00480">ConstraintSet::Y</a>, and <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00481">ConstraintSet::Z</a>.</p>

</div>
</div>
<a class="anchor" id="gafbdff81ed0bc8636ee03b15e0681574e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ForwardDynamicsConstraintsRangeSpaceSparse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a3e84ee221851d9f8b98a4f729f0f0ca2">Math::SpatialVector</a> &gt; *&#160;</td>
          <td class="paramname"><em>f_ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01007">1007</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00490">ConstraintSet::a</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00452">ConstraintSet::C</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00696">RigidBodyDynamics::CalcConstrainedSystemVariables()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00441">ConstraintSet::force</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00455">ConstraintSet::G</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00454">ConstraintSet::gamma</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00450">ConstraintSet::H</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00488">ConstraintSet::K</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, and <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00400">RigidBodyDynamics::SolveConstrainedSystemRangeSpaceSparse()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa9cff799e1e2fc962658fe378708b720"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void ForwardDynamicsContactsKokkevis </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html">ConstraintSet</a> &amp;&#160;</td>
          <td class="paramname"><em>CS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>QDDot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes forward dynamics that accounts for active contacts in <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html" title="Structure that contains both constraint information and workspace memory. ">ConstraintSet</a>. </p>
<p>The method used here is the one described by Kokkevis and Metaxas in the Paper "Practical Physics for Articulated Characters", Game Developers Conference, 2004.</p>
<p>It does this by recursively computing the inverse articulated-body inertia (IABI) <img class="formulaInl" alt="$\Phi_{i,j}$" src="../../form_34.png"/> which is then used to build and solve a system of the form: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \left( \begin{array}{c} \dot{v}_1 \\ \dot{v}_2 \\ \vdots \\ \dot{v}_n \end{array} \right) = \left( \begin{array}{cccc} \Phi_{1,1} &amp; \Phi_{1,2} &amp; \cdots &amp; \Phi{1,n} \\ \Phi_{2,1} &amp; \Phi_{2,2} &amp; \cdots &amp; \Phi{2,n} \\ \cdots &amp; \cdots &amp; \cdots &amp; \vdots \\ \Phi_{n,1} &amp; \Phi_{n,2} &amp; \cdots &amp; \Phi{n,n} \end{array} \right) \left( \begin{array}{c} f_1 \\ f_2 \\ \vdots \\ f_n \end{array} \right) + \left( \begin{array}{c} \phi_1 \\ \phi_2 \\ \vdots \\ \phi_n \end{array} \right). \]" src="../../form_35.png"/>
</p>
<p> Here <img class="formulaInl" alt="$n$" src="../../form_36.png"/> is the number of constraints and the method for building the system uses the Articulated <a class="el" href="../../da/dd2/struct_rigid_body_dynamics_1_1_body.html" title="Describes all properties of a single body. ">Body</a> Algorithm to efficiently compute entries of the system. The values <img class="formulaInl" alt="$\dot{v}_i$" src="../../form_37.png"/> are the constraint accelerations, <img class="formulaInl" alt="$f_i$" src="../../form_38.png"/> the constraint forces, and <img class="formulaInl" alt="$\phi_i$" src="../../form_39.png"/> are the constraint bias forces.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>rigid body model </td></tr>
    <tr><td class="paramname">Q</td><td>state vector of the internal joints </td></tr>
    <tr><td class="paramname">QDot</td><td>velocity vector of the internal joints </td></tr>
    <tr><td class="paramname">Tau</td><td>actuations of the internal joints </td></tr>
    <tr><td class="paramname">CS</td><td>a list of all contact points </td></tr>
    <tr><td class="paramname">QDDot</td><td>accelerations of the internals joints (output)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>During execution of this function values such as <a class="el" href="../../d7/de7/struct_rigid_body_dynamics_1_1_constraint_set.html#a9b96834a8bbeb859d4c5bb2889b14cde">ConstraintSet::force</a> get modified and will contain the value of the force acting along the normal.</dd>
<dd>
This function supports only contact constraints.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000001">Todo:</a></b></dt><dd>Allow for external forces </dd></dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01445">1445</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00490">ConstraintSet::a</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00439">ConstraintSet::acceleration</a>, <a class="el" href="../../d4/d41/_spatial_algebra_operators_8h_source.html#l00233">SpatialTransform::applyAdjoint()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00420">ConstraintSet::body</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00159">RigidBodyDynamics::CalcBodyToBaseCoordinates()</a>, <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00517">RigidBodyDynamics::CalcPointAcceleration()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00412">ConstraintSet::constraintType</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00273">ConstraintSet::ContactConstraint</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00139">Model::dof_count</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00498">ConstraintSet::f_ext_constraints</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00496">ConstraintSet::f_t</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00254">Model::fixed_body_discriminator</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00441">ConstraintSet::force</a>, <a class="el" href="../../de/d3c/_dynamics_8cc_source.html#l00315">RigidBodyDynamics::ForwardDynamics()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01311">RigidBodyDynamics::ForwardDynamicsAccelerationDeltas()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01139">RigidBodyDynamics::ForwardDynamicsApplyConstraintForces()</a>, <a class="el" href="../../da/d91/_constraints_8cc_source.html#l01674">RigidBodyDynamics::GetMovableBodyId()</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00371">Model::IsFixedBodyId()</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00488">ConstraintSet::K</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00407">ConstraintSet::linear_solver</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverColPivHouseholderQR</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverHouseholderQR</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverPartialPivLU</a>, <a class="el" href="../../df/d59/rbdl__mathutils_8cc_source.html#l00036">RigidBodyDynamics::Math::LinSolveGaussElimPivot()</a>, <a class="el" href="../../da/def/_logging_8h_source.html#l00023">LOG</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00263">Model::mBodies</a>, <a class="el" href="../../da/ded/_model_8h_source.html#l00241">Model::mFixedBodies</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00422">ConstraintSet::normal</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00421">ConstraintSet::point</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00500">ConstraintSet::point_accel_0</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00494">ConstraintSet::QDDot_0</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00492">ConstraintSet::QDDot_t</a>, <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00399">ConstraintSet::size()</a>, <a class="el" href="../../da/def/_logging_8h_source.html#l00024">SUPPRESS_LOGGING</a>, and <a class="el" href="../../d4/de5/_kinematics_8cc_source.html#l00078">RigidBodyDynamics::UpdateKinematicsCustom()</a>.</p>

</div>
</div>
<a class="anchor" id="gad6d7f6b8059cd0b83414837635ba96b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void SolveConstrainedSystemDirect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>H</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>gamma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>qddot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>lambda</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Math::LinearSolver &amp;&#160;</td>
          <td class="paramname"><em>linear_solver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Solves the full contact system directly, i.e. simultaneously for contact forces and joint accelerations. </p>
<p>This solves a <img class="formulaInl" alt="$ (n_\textit{dof} + n_c) \times (n_\textit{dof} + n_c$" src="../../form_40.png"/> linear system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">H</td><td>the joint space inertia matrix </td></tr>
    <tr><td class="paramname">G</td><td>the constraint jacobian </td></tr>
    <tr><td class="paramname">c</td><td>the <img class="formulaInl" alt="$ \mathbb{R}^{n_\textit{dof}}$" src="../../form_41.png"/> vector of the upper part of the right hand side of the system </td></tr>
    <tr><td class="paramname">gamma</td><td>the <img class="formulaInl" alt="$ \mathbb{R}^{n_c}$" src="../../form_42.png"/> vector of the lower part of the right hand side of the system </td></tr>
    <tr><td class="paramname">qddot</td><td>result: joint accelerations </td></tr>
    <tr><td class="paramname">lambda</td><td>result: constraint forces </td></tr>
    <tr><td class="paramname">A</td><td>work-space for the matrix of the linear system </td></tr>
    <tr><td class="paramname">b</td><td>work-space for the right-hand-side of the linear system </td></tr>
    <tr><td class="paramname">x</td><td>work-space for the solution of the linear system </td></tr>
    <tr><td class="paramname">type</td><td>of solver that should be used to solve the system </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00349">349</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverColPivHouseholderQR</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverHouseholderQR</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverPartialPivLU</a>, and <a class="el" href="../../da/def/_logging_8h_source.html#l00023">LOG</a>.</p>

</div>
</div>
<a class="anchor" id="ga291125f9f37ab712f624974378ca8384"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void SolveConstrainedSystemNullSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>H</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>gamma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>qddot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>lambda</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>Z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>qddot_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>qddot_z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Math::LinearSolver &amp;&#160;</td>
          <td class="paramname"><em>linear_solver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Solves the contact system by first solving for the joint accelerations and then for the constraint forces. </p>
<p>This methods requires a <img class="formulaInl" alt="$n_\textit{dof} \times n_\textit{dof}$" src="../../form_44.png"/> matrix of the form <img class="formulaInl" alt="$\left[ \ Y \ | Z \ \right]$" src="../../form_45.png"/> with the property <img class="formulaInl" alt="$GZ = 0$" src="../../form_46.png"/> that can be computed using a QR decomposition (e.g. see code for ForwardDynamicsContactsNullSpace()).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">H</td><td>the joint space inertia matrix </td></tr>
    <tr><td class="paramname">G</td><td>the constraint jacobian </td></tr>
    <tr><td class="paramname">c</td><td>the <img class="formulaInl" alt="$ \mathbb{R}^{n_\textit{dof}}$" src="../../form_41.png"/> vector of the upper part of the right hand side of the system </td></tr>
    <tr><td class="paramname">gamma</td><td>the <img class="formulaInl" alt="$ \mathbb{R}^{n_c}$" src="../../form_42.png"/> vector of the lower part of the right hand side of the system </td></tr>
    <tr><td class="paramname">qddot</td><td>result: joint accelerations </td></tr>
    <tr><td class="paramname">lambda</td><td>result: constraint forces </td></tr>
    <tr><td class="paramname">Y</td><td>basis for the range-space of the constraints </td></tr>
    <tr><td class="paramname">Z</td><td>basis for the null-space of the constraints </td></tr>
    <tr><td class="paramname">qddot_y</td><td>work-space of size <img class="formulaInl" alt="$\mathbb{R}^{n_\textit{dof}}$" src="../../form_47.png"/> </td></tr>
    <tr><td class="paramname">qddot_z</td><td>work-space of size <img class="formulaInl" alt="$\mathbb{R}^{n_\textit{dof}}$" src="../../form_47.png"/> </td></tr>
    <tr><td class="paramname">linear_solver</td><td>type of solver that should be used to solve the system </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00437">437</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverColPivHouseholderQR</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverHouseholderQR</a>, <a class="el" href="../../d1/d49/rbdl__mathutils_8h_source.html#l00028">LinearSolverPartialPivLU</a>, and <a class="el" href="../../da/def/_logging_8h_source.html#l00023">LOG</a>.</p>

</div>
</div>
<a class="anchor" id="gac634d60a1857213ec7289a76f8bd280a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RBDL_DLLAPI void SolveConstrainedSystemRangeSpaceSparse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>H</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>gamma</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>qddot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>lambda</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#aa98b9390985e1e5ec247ec79d50dffe0">Math::MatrixNd</a> &amp;&#160;</td>
          <td class="paramname"><em>K</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/da0/namespace_rigid_body_dynamics_1_1_math.html#a2cf580002219c9abf187ceb3d4021785">Math::VectorNd</a> &amp;&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Math::LinearSolver&#160;</td>
          <td class="paramname"><em>linear_solver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Solves the contact system by first solving for the the joint accelerations and then the contact forces using a sparse matrix decomposition of the joint space inertia matrix. </p>
<p>This method exploits the branch-induced sparsity by the structure preserving <img class="formulaInl" alt="$L^TL $" src="../../form_43.png"/> decomposition described in RBDL, Section 6.5.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">H</td><td>the joint space inertia matrix </td></tr>
    <tr><td class="paramname">G</td><td>the constraint jacobian </td></tr>
    <tr><td class="paramname">c</td><td>the <img class="formulaInl" alt="$ \mathbb{R}^{n_\textit{dof}}$" src="../../form_41.png"/> vector of the upper part of the right hand side of the system </td></tr>
    <tr><td class="paramname">gamma</td><td>the <img class="formulaInl" alt="$ \mathbb{R}^{n_c}$" src="../../form_42.png"/> vector of the lower part of the right hand side of the system </td></tr>
    <tr><td class="paramname">qddot</td><td>result: joint accelerations </td></tr>
    <tr><td class="paramname">lambda</td><td>result: constraint forces </td></tr>
    <tr><td class="paramname">K</td><td>work-space for the matrix of the constraint force linear system </td></tr>
    <tr><td class="paramname">a</td><td>work-space for the right-hand-side of the constraint force linear system </td></tr>
    <tr><td class="paramname">linear_solver</td><td>type of solver that should be used to solve the constraint force system </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d91/_constraints_8cc_source.html#l00400">400</a> of file <a class="el" href="../../da/d91/_constraints_8cc_source.html">Constraints.cc</a>.</p>

<p>References <a class="el" href="../../df/d59/rbdl__mathutils_8cc_source.html#l00257">RigidBodyDynamics::Math::SparseFactorizeLTL()</a>, <a class="el" href="../../df/d59/rbdl__mathutils_8cc_source.html#l00307">RigidBodyDynamics::Math::SparseSolveLTx()</a>, and <a class="el" href="../../df/d59/rbdl__mathutils_8cc_source.html#l00296">RigidBodyDynamics::Math::SparseSolveLx()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gae2e0e1609dd6e5ed9628a7097b32665e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct RBDL_DLLAPI CustomConstraint</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../da/dc9/_constraints_8h_source.html#l00255">255</a> of file <a class="el" href="../../da/dc9/_constraints_8h_source.html">Constraints.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Dec 14 2018 11:39:55 for Rigid Body Dynamics Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
